import{j as e}from"./jsx-runtime.CRkqtJS5.js";import{r as l}from"./index.B52nOzfP.js";import{u as m,a as j}from"./base.myuU_eUG.js";function v(){const[c,d]=l.useState([]),[n,p]=l.useState(!1);l.useState(!1);const[x,i]=l.useState("");l.useEffect(()=>{(async()=>{try{const s=localStorage.getItem("token"),a=await fetch(`${m}/users`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${s}`}});if(console.log(a),!a.ok)return i("ocurrio un error al solicitar los datos");const o=(await a.json()).data.reverse();console.log(o),d(o)}catch{i("ocurrio un error al solicitar los datos"),console.log("Error al obtener datos:")}})()},[n]);const h=()=>p(!n),w=async r=>{try{const s=localStorage.getItem("token");if(!s)return;console.log(r,s);const a=await fetch(`${j}/${r}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}});if(!a.ok)throw new Error;const t=await a.json();console.log({json:t}),t.status==="success"&&d(c.filter(o=>o.id!=r))}catch{alert("Error al eliminar el cliente")}};function b(r){w(r)}return e.jsxs("div",{className:"flex flex-col gap-[10px]",children:[!x&&e.jsx("div",{children:x}),e.jsx("div",{className:"px-[10px] py-[5px]",children:e.jsx("div",{onClick:h,className:"w-8 h-8 border-[1px] border-slate-300 flex justify-center items-center rounded-lg hover:bg-secondary cursor-pointer",children:e.jsx("svg",{className:"",xmlns:"http://www.w3.org/2000/svg",width:"1.2em",height:"1.2em",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"black",d:"M2 12a9 9 0 0 0 9 9c2.39 0 4.68-.94 6.4-2.6l-1.5-1.5A6.7 6.7 0 0 1 11 19c-6.24 0-9.36-7.54-4.95-11.95S18 5.77 18 12h-3l4 4h.1l3.9-4h-3a9 9 0 0 0-18 0"})})})}),e.jsx("div",{className:"max-w-7xl overflow-x-auto w-full",children:e.jsxs("table",{className:"text-left w-full rounded-2xl    border-[2px]   overflow-hidden",children:[e.jsx("thead",{className:" flex  w-full border-[1px] rounded-2xl border-slate-300 rounded-b-none",children:e.jsxs("tr",{className:"flex w-full ",children:[e.jsx("th",{className:"p-4 w-[40px] ",children:"id"}),e.jsx("th",{className:"p-4 w-[150px]",children:"nombre"}),e.jsx("th",{className:"p-4 w-[150px]",children:"dni"}),e.jsx("th",{className:"p-4 w-[150px]",children:"telefono"}),e.jsx("th",{className:"p-4 w-[150px]",children:"servicio"}),e.jsx("th",{className:"p-4 w-[150px]",children:"distrito"}),e.jsx("th",{className:"p-4 w-[150px]",children:"provincia"}),e.jsx("th",{className:"p-4 w-[150px]",children:"correo"}),e.jsx("th",{className:"p-4 w-[150px]",children:"mensaje"}),e.jsx("th",{className:"p-4 w-[150px]",children:"fecha"}),e.jsx("th",{className:"p-4 w-[150px]",children:"eliminar"})]})}),e.jsx("tbody",{className:"bg-grey-light flex flex-col items-center justify-between overflow-y-auto w-full  border-[1px] rounded-2xl rounded-t-[0px] border-t-0 border-slate-300 max-h-[500px] max-w-full overflow-x-auto   ",children:c.map((r,s,a)=>e.jsxs("tr",{className:"flex w-full  ",children:[e.jsx("td",{className:"px-4 py-2 w-[60px] break-words border-[1px] border-slate-300",children:a.length-s}),e.jsx("td",{className:"px-4 py-2 w-[150px] break-words border-[1px] border-slate-300",children:r.nombre}),e.jsx("td",{className:"px-4 py-2 w-[150px] break-words border-[1px] border-slate-300",children:r.dni}),e.jsx("td",{className:"px-4 py-2 w-[150px] break-words border-[1px] border-slate-300",children:r.telefono}),e.jsx("td",{className:"px-4 py-2 w-[150px] break-words border-[1px] border-slate-300",children:r.servicio}),e.jsx("td",{className:"px-4 py-2 w-[150px] break-words border-[1px] border-slate-300",children:r.distrito}),e.jsx("td",{className:"px-4 py-2 w-[150px] break-words border-[1px] border-slate-300",children:r.provincia}),e.jsx("td",{className:"px-4 py-2 w-[150px] break-words border-[1px] border-slate-300",children:r.correo}),e.jsx("td",{className:"px-4 py-2 w-[150px]  break-words border-[1px] border-slate-300",children:r.mensaje}),e.jsx("td",{className:"px-4 py-2 w-[150px]  break-words border-[1px] border-slate-300",children:r.fechaLima}),e.jsx("td",{className:"px-4 py-2 w-[200px] break-words border-[1px] border-slate-300 flex justify-center items-center",children:e.jsxs("svg",{onClick:()=>b(r.id),xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 cursor-pointer ",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"red",d:"M5 20a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8h2V6h-4V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H3v2h2zM9 4h6v2H9zM8 8h9v12H7V8z"}),e.jsx("path",{fill:"red",d:"M9 10h2v8H9zm4 0h2v8h-2z"})]})})]},s))})]})})]})}export{v as default};
